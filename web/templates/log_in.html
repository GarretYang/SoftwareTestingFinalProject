<!doctype html>
<html>
<head>
  <title>Hiking App Log In</title>

  <!-- See https://github.com/firebase/firebaseui-web. -->
  <!-- [START gae_python37_auth_init_firebase] -->
  <!-- *******************************************************************************************
       * TODO(DEVELOPER): Paste the initialization snippet from:
       * http://console.firebase.google.com > Overview > Add Firebase to your web app.
       ***************************************************************************************** -->
  <!-- [END gae_python37_auth_init_firebase] -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-analytics.js"></script>

  <!-- [START gae_python37_auth_include_firebaseui] -->
  <script src="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.css">
  <!-- [END gae_python37_auth_include_firebaseui] -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">  
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyBr8rUcWwfIv9f22ACzPPIJoWV6jc9KECQ",
        authDomain: "yanghu-yh-codelab-practice496.firebaseapp.com",
        databaseURL: "https://yanghu-yh-codelab-practice496.firebaseio.com",
        projectId: "yanghu-yh-codelab-practice496",
        storageBucket: "yanghu-yh-codelab-practice496.appspot.com",
        messagingSenderId: "317116116350",
        appId: "1:317116116350:web:00dd67f4b7146f4a5e972f",
        measurementId: "G-EQVJQDQ0QR"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();  
  </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script> 
  <script>
    if (typeof firebase === 'undefined') {
      const msg = "Please paste the Firebase initialization snippet into index.html. See https://console.firebase.google.com > Overview > Add Firebase to your web app.";
      console.log(msg);
      alert(msg);
    }
  </script>
  <!-- [START gae_python37_auth_include_firebaseui] -->
  <script src="https://cdn.firebase.com/libs/firebaseui/2.6.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.6.2/firebaseui.css">
  <!-- [END gae_python37_auth_include_firebaseui] -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <!-- <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='script.js') }}"> -->
  <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-auth.js"></script>
</head>
<body>

<section class="hero is-link is-fullheight-with-navbar">
    <div class="hero-body">
      <div class="container">
        <p class="title">
          <h1 class="title">Hiking App Log In</h1>
          <h3>(log in to add theme/reports)</h3>
            <!-- [START gae_python37_auth_firebase_html] -->
            <div class="container">
              <div id="firebaseui-auth-container"></div>
            </div>

            <button class="button is-danger" id="sign-out" style="display: none">Sign Out</button>

            <div id="login-info" hidden=true>
              <h2>Login info:</h2>
              {% if user_data %}
                <dl>
                  <dt>Photo</dt><dd>
                    <figure class="image is-128x128 center" style="display:inline-block; text-align: center">
                      <img class="" src={{ user_data['picture'] }}>
                    </figure>
                  </dd>
                  <br/>
                  <dt>Name</dt><dd>{{ user_data['name'] }}</dd>
                  <br/>
                  <dt>Email</dt><dd>{{ user_data['email'] }}</dd>
                  <br/>
                </dl>
              {% elif error_message %}
                <p>Error: {{ error_message }}</p>
              {% endif %}
            </div>
            <!-- [END gae_python37_auth_firebase_html] -->         
        </p>    
      </div>
    </div>
  </section>
</body>
</html>
